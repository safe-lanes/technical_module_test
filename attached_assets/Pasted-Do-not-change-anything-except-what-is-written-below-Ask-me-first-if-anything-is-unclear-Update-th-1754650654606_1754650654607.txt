Do not change anything except what is written below. Ask me first if anything is unclear.
Update the Work Order Form (both places it opens)

The same form opens when:

    Clicking “+ Add WO” from Section C on the Component screen, and

    Clicking “Add Work Orders” from the Add/Edit Component form.

Use one form with two parts (left nav stays the same):
Part A – Work Order Details (Template) and Part B – Work Completion Record (Execution).
A) Part A – Work Order Details (TEMPLATE) — required changes

Purpose: Create / edit a Work Order Template for the selected component.
1) Header (top of Part A)

    Add WO Title (text, required).

    Add Component (read-only text) and Component Code (read-only, small).

        Pre-fill from the selected component. If the form was opened from Add Component, use the current component.

    Add WO Template Code (read-only, small, muted).

2) Core template fields (exact labels & behavior)

    Maintenance Basis (dropdown): Calendar | Running Hours (required)

    Frequency

        If Calendar:

            Every (number, required)

            Unit (dropdown: Days, Weeks, Months, Years, required)

        If Running Hours:

            Every (number, required; e.g., 1000)

    Task Type (dropdown: Inspection, Overhaul, Service, Testing, required)

    Assigned To (dropdown – ranks, required)

    Approver (dropdown – ranks, optional)

    Job Priority (dropdown – Low, Medium, High, optional)

    Class Related (Yes/No, optional)

    Brief Work Description (multiline)

    Keep existing sections A2 Required Spare Parts, A3 Required Tools & Equipment, A4 Safety Requirements. No style changes.

3) Auto-generate immutable WO Template Code

Format: WO-<ComponentCode>-<TaskCode><FreqTag>

    TaskCode: INS | OH | SRV | TST

    FreqTag:

        Calendar → D<N> / W<N> / M<N> / Y<N> (e.g., M1, W2)

        Running Hours → RH<N> (e.g., RH1000)
        Example: WO-6.1.1-INSM1, WO-1.1.1.2-OHRH1000

    Compute on save; store immutable after first save. Recompute only if basis/task/frequency changes; otherwise leave as-is.

4) Next due calculation (store with template)

    If Calendar: compute Next Due Date = today + frequency.

    If Running Hours: store Next Due Reading = current component reading + frequency (if current reading is available; else leave blank).

    Show these in the template list (Section C on the component screen). Do not change list styling.

5) A5 Work History (in Part A)

    Convert the existing “A5 Work History” table to list executions for this template only.

    Columns: WO Execution ID, Assigned To, Performed By, Total Time (Hrs), Due Date / Due Reading, Completion Date, Status.

    Rows link to open Part B for that execution (read-only).

B) Part B – Work Completion Record (EXECUTION) — required changes

Purpose: Record a single performance of a template (the job done). On submit, move to Maintenance History (Section D) and update next due.
1) Generate WO Execution ID on first save of Part B

Format: <YYYY>-<WO Template Code>-<NN> (sequence per template per year, start at 01).
Show this ID read-only at the top of Part B and in A5 Work History after save.
2) Keep current layout but enforce/adjust fields

    B1 Risk Assessment, Checklists & Records: keep the three toggles and file uploads.

    B2 Details of Work Carried Out:

        Start Date/Time, Completion Date/Time (required)

        Assigned To, Performed By (required)

        No of Persons in the team, Total Time Taken (Hours), Manhours (numbers)

        Work Carried Out (multiline)

        Job Experience / Notes (multiline)

    B3 Running Hours (show only if the template is RH-based):

        Previous Reading, Current Reading (both numeric; required for RH-based completion).

    B4 Spare Parts Consumed: keep as is.

3) Status transitions on submit

    On Part B Submit:

        Save the Execution row to history (Section D) with status Completed and WO Execution ID.

        Recalculate template Next Due:

            Calendar: last completion date + frequency

            Running Hours: current reading + frequency

        Update the template status in Section C accordingly.

C) Launching the form (uniform behavior)

    From Section C (+ Add WO) or from Add Component → Add Work Orders:

        Component and Component Code are prefilled/read-only.

        Open on Part A (Template).

    From Section C (click an existing template):

        Open Part A with that template’s data.

        “Work Instructions” button stays as-is.

    From A5 Work History (row click):

        Open Part B for that execution (read-only).

D) Validation & constraints

    Required fields: WO Title, Maintenance Basis, Frequency (and Unit for Calendar), Assigned To; for Part B: Start/Completion date-time, Assigned To, Performed By; plus RH readings for RH-based WOs.

    Codes uppercase, no spaces/slashes.

    WO Template Code unique per component.

    WO Execution ID unique globally.

    No changes to styles, routes, or other modules.