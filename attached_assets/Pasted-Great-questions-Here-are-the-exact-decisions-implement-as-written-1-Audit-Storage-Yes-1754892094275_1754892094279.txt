Great questions. Here are the exact decisions—implement *as written*.

1. **Audit Storage**

* **Yes**: create a dedicated table **`running_hours_audit`**.
* Minimum columns:
  `id (pk)`, `vesselId`, `componentId`, `previousRH`, `newRH`, `cumulativeRH`, `dateUpdatedLocal`, `dateUpdatedTZ`, `enteredAtUTC`, `userId`, `source ('single'|'bulk')`, `notes`, `meterReplaced (bool)`, `oldMeterFinal`, `newMeterStart`, `version`.
* Indexes: `(componentId, enteredAtUTC DESC)`, `(componentId, dateUpdatedLocal)`.

2. **User ID for Audit**

* Use the **current logged-in user** as `userId` (not `assignedTo`).
* If auth is not wired, use the existing user context you have (placeholder ok now, but keep the field real).

3. **Cumulative Running Hours Storage**

* **Store cumulative** on both the component and each audit row.

  * Component: `component.currentCumulativeRH` (source of truth for UI).
  * Audit: `cumulativeRH` snapshot each time (for utilization math and history).
* Recompute cumulative only on save; **do not** recalc from scratch on every read.

4. **“Meter replaced?” Implementation**

* **Per-row** in bulk updates (not global). Different components can have different meter events in the same batch.

5. **Date Format**

* **Display**: `DD-MMM-YYYY HH:mm` (24h) in **vessel local time**.
* **Store** both:

  * `dateUpdatedLocal` (string or tz-aware) + `dateUpdatedTZ` (e.g., `Asia/Kolkata`)
  * `enteredAtUTC` (ISO 8601).
* **Block future dates**; allow past dates.

6. **Utilization Rate Caching**

* **In-memory cache** in the app layer (e.g., per-component memoized for **15 minutes**).
* Bust cache on any RH save (single/bulk) for affected components.
* Do not use localStorage/sessionStorage.

7. **Export Functionality**

* **Yes—implement CSV export now.**
* Filename: `running-hours_<YYYYMMDD_HHMM>.csv` (server time).
* Columns (exact order):
  `Vessel, Component, Component Code, Eqpt. Category, Running Hours (cumulative), Last Updated (local), Utilization Rate (hrs/day), Notes`
* Respect current filters and pagination state (export **filtered set**, not just current page).

If anything blocks these (e.g., missing vessel TZ), pause and ask before deviating.
