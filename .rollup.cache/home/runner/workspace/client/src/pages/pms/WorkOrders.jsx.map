{"version":3,"file":"WorkOrders.jsx","sourceRoot":"","sources":["WorkOrders.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { Search, Plus, Pen, Timer } from 'lucide-react';\nimport { useLocation } from 'wouter';\nimport { ColDef, GridReadyEvent, GridApi } from 'ag-grid-enterprise';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport AgGridTable from '@/components/common/AgGridTable';\nimport {\n  StatusCellRenderer,\n  WorkOrderActionsCellRenderer,\n  DateCellRenderer,\n} from '@/components/common/AgGridCellRenderers';\nimport PostponeWorkOrderDialog from '@/components/PostponeWorkOrderDialog';\nimport WorkOrderForm from '@/components/WorkOrderForm';\nimport UnplannedWorkOrderForm from '@/components/UnplannedWorkOrderForm';\nimport { useModifyMode } from '@/hooks/useModifyMode';\nimport { ModifyFieldWrapper } from '@/components/modify/ModifyFieldWrapper';\nimport { ModifyStickyFooter } from '@/components/modify/ModifyStickyFooter';\n\ninterface WorkOrder {\n  id: string;\n  component: string;\n  componentCode?: string;\n  workOrderNo: string;\n  templateCode?: string;\n  executionId?: string;\n  jobTitle: string;\n  assignedTo: string;\n  dueDate: string;\n  status: string;\n  dateCompleted?: string;\n  submittedDate?: string;\n  formData?: any;\n  taskType?: string;\n  maintenanceBasis?: string;\n  frequencyValue?: string;\n  frequencyUnit?: string;\n  approverRemarks?: string;\n  isExecution?: boolean;\n  templateId?: string;\n  approver?: string;\n  approvalDate?: string;\n  rejectionDate?: string;\n  nextDueDate?: string;\n  nextDueReading?: string;\n  currentReading?: string;\n}\n\n// Helper function to generate template code\nconst generateTemplateCode = (\n  componentCode: string,\n  taskType: string,\n  basis: string,\n  frequency: string,\n  unit?: string\n) => {\n  const taskCodes: Record<string, string> = {\n    Inspection: 'INS',\n    Overhaul: 'OH',\n    Service: 'SRV',\n    Testing: 'TST',\n  };\n\n  let freqTag = '';\n  if (basis === 'Calendar' && frequency && unit) {\n    const unitCode = unit[0].toUpperCase();\n    freqTag = `${unitCode}${frequency}`;\n  } else if (basis === 'Running Hours' && frequency) {\n    freqTag = `RH${frequency}`;\n  }\n\n  const taskCode = taskCodes[taskType] || '';\n  return `WO-${componentCode}-${taskCode}${freqTag}`.toUpperCase();\n};\n\n// Sample data for seeding if database is empty\nconst sampleWorkOrders: WorkOrder[] = [\n  {\n    id: '1',\n    component: 'Main Engine',\n    componentCode: '6.1.1',\n    templateCode: 'WO-6.1.1-OHM6',\n    workOrderNo: 'WO-2025-03',\n    jobTitle: 'Main Engine Overhaul - Replace Main Bearings',\n    assignedTo: 'Chief Engineer',\n    dueDate: '02-Jun-2025',\n    status: 'Completed',\n    dateCompleted: '02-Jun-2025',\n    taskType: 'Overhaul',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '6',\n    frequencyUnit: 'Months',\n  },\n  {\n    id: '2',\n    component: 'Diesel Generator 1',\n    componentCode: '6.2.1',\n    templateCode: 'WO-6.2.1-SRVM3',\n    workOrderNo: 'WO-2025-17',\n    jobTitle: 'DG1 - Replace Fuel Injectors',\n    assignedTo: '2nd Engineer',\n    dueDate: '05-Jun-2025',\n    status: 'Due (Grace P)',\n    taskType: 'Service',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '3',\n    frequencyUnit: 'Months',\n  },\n  {\n    id: '3',\n    component: 'Steering Gear',\n    componentCode: '1.5.1',\n    templateCode: 'WO-1.5.1-INSM3',\n    workOrderNo: 'WO-2025-54',\n    jobTitle: 'Steering Gear - 3 Monthly XXX',\n    assignedTo: '2nd Engineer',\n    dueDate: '16-Jun-2025',\n    status: 'Due',\n    taskType: 'Inspection',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '3',\n    frequencyUnit: 'Months',\n  },\n  {\n    id: '4',\n    component: 'Main Cooling Seawater Pump',\n    componentCode: '7.1.2.1',\n    templateCode: 'WO-7.1.2.1-SRVRH2000',\n    workOrderNo: 'WO-2025-19',\n    jobTitle: 'MCSP - Replace Mechanical Seal',\n    assignedTo: '3rd Engineer',\n    dueDate: '23-Jun-2025',\n    status: 'Due',\n    taskType: 'Service',\n    maintenanceBasis: 'Running Hours',\n    frequencyValue: '2000',\n    frequencyUnit: '',\n  },\n  {\n    id: '5',\n    component: 'Main Air Compressor',\n    componentCode: '7.4.1',\n    templateCode: 'WO-7.4.1-OHRH1000',\n    workOrderNo: 'WO-2025-03',\n    jobTitle: 'Main Air Compressor - Work Order XXX',\n    assignedTo: '3rd Engineer',\n    dueDate: '30-Jun-2025',\n    status: 'Completed',\n    dateCompleted: '30-Jun-2025',\n    taskType: 'Overhaul',\n    maintenanceBasis: 'Running Hours',\n    frequencyValue: '1000',\n    frequencyUnit: '',\n  },\n  {\n    id: '6',\n    component: 'Mooring Winch Forward',\n    componentCode: '3.3.1',\n    templateCode: 'WO-3.3.1-INSM6',\n    workOrderNo: 'WO-2025-17',\n    jobTitle: 'Mooring Winch Forward - Work Order XXX',\n    assignedTo: '2nd Engineer',\n    dueDate: '02-Jun-2025',\n    status: 'Overdue',\n    taskType: 'Inspection',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '6',\n    frequencyUnit: 'Months',\n  },\n  {\n    id: '7',\n    component: 'Bow Thruster',\n    componentCode: '5.2.1',\n    templateCode: 'WO-5.2.1-OHY1',\n    workOrderNo: 'WO-2025-54',\n    jobTitle: 'Bow Thruster - Work Order XXX',\n    assignedTo: 'Chief Engineer',\n    dueDate: '09-Jun-2025',\n    status: 'Postponed',\n    taskType: 'Overhaul',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '1',\n    frequencyUnit: 'Years',\n  },\n  {\n    id: '8',\n    component: 'Fire Pump',\n    componentCode: '8.1.2',\n    templateCode: 'WO-8.1.2-TSTM1',\n    workOrderNo: 'WO-2025-13',\n    jobTitle: 'Fire Pump - Work Order XXX',\n    assignedTo: '2nd Engineer',\n    dueDate: '16-Jun-2025',\n    status: 'Completed',\n    dateCompleted: '16-Jun-2025',\n    taskType: 'Testing',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '1',\n    frequencyUnit: 'Months',\n  },\n  {\n    id: '9',\n    component: 'Main Engine',\n    componentCode: '6.1.1',\n    templateCode: 'WO-6.1.1-SRVRH3000',\n    workOrderNo: 'WO-2025-03',\n    jobTitle: 'Main Engine - Replace Piston Rings (#3 Unit)',\n    assignedTo: 'Chief Engineer',\n    dueDate: '23-Jun-2025',\n    status: 'Due',\n    taskType: 'Service',\n    maintenanceBasis: 'Running Hours',\n    frequencyValue: '3000',\n    frequencyUnit: '',\n  },\n  {\n    id: '10',\n    component: 'Diesel Generator 1',\n    componentCode: '6.2.1',\n    templateCode: 'WO-6.2.1-INSRH500',\n    workOrderNo: 'WO-2025-17',\n    jobTitle: 'Diesel Generator 1 - Work Order XXX',\n    assignedTo: '2nd Engineer',\n    dueDate: '30-Jun-2025',\n    status: 'Completed',\n    dateCompleted: '30-Jun-2025',\n    taskType: 'Inspection',\n    maintenanceBasis: 'Running Hours',\n    frequencyValue: '500',\n    frequencyUnit: '',\n  },\n  {\n    id: '11',\n    component: 'Steering Gear',\n    componentCode: '1.5.1',\n    templateCode: 'WO-1.5.1-OHY2',\n    workOrderNo: 'WO-2025-54',\n    jobTitle: 'Steering Gear - Work Order XXX',\n    assignedTo: '2nd Engineer',\n    dueDate: '02-Jun-2025',\n    status: 'Overdue',\n    taskType: 'Overhaul',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '2',\n    frequencyUnit: 'Years',\n  },\n  {\n    id: '12',\n    component: 'Main Cooling Seawater Pump',\n    componentCode: '7.1.2.1',\n    templateCode: 'WO-7.1.2.1-INSRH1000',\n    workOrderNo: 'WO-2025-19',\n    jobTitle: 'Main Cooling Seawater Pump - Work Order XXX',\n    assignedTo: '3rd Engineer',\n    dueDate: '09-Aug-2025',\n    status: 'Due',\n    taskType: 'Inspection',\n    maintenanceBasis: 'Running Hours',\n    frequencyValue: '1000',\n    frequencyUnit: '',\n  },\n  // Sample execution with Pending Approval status\n  {\n    id: 'exec-001',\n    executionId: '2025-WO-1.1.1.1.11-INSM3-01',\n    templateCode: 'WO-1.1.1.1.11-INSM3',\n    component: 'Fresh Water Pump #1',\n    componentCode: '1.1.1.1.11',\n    workOrderNo: '2025-WO-1.1.1.1.11-INSM3-01',\n    jobTitle: 'Pump Inspection Execution',\n    assignedTo: '2nd Engineer',\n    dueDate: '2025-01-15',\n    submittedDate: '2025-01-10',\n    status: 'Pending Approval',\n    isExecution: true,\n    taskType: 'Inspection',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '3',\n    frequencyUnit: 'Months',\n  },\n  {\n    id: 'exec-002',\n    executionId: '2025-WO-1.1.1.1.13-SRVW4-01',\n    templateCode: 'WO-1.1.1.1.13-SRVW4',\n    component: 'Fresh Water Pump #2',\n    componentCode: '1.1.1.1.13',\n    workOrderNo: '2025-WO-1.1.1.1.13-SRVW4-01',\n    jobTitle: 'Weekly Service Execution',\n    assignedTo: '3rd Engineer',\n    dueDate: '2025-01-12',\n    submittedDate: '2025-01-08',\n    status: 'Pending Approval',\n    isExecution: true,\n    taskType: 'Service',\n    maintenanceBasis: 'Calendar',\n    frequencyValue: '4',\n    frequencyUnit: 'Weeks',\n  },\n];\n\nconst WorkOrders: React.FC = () => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedVessel, setSelectedVessel] = useState('');\n  const [selectedPeriod, setSelectedPeriod] = useState('');\n  const [selectedRank, setSelectedRank] = useState('');\n  const [selectedComponent, setSelectedComponent] = useState('');\n  const [selectedCriticality, setSelectedCriticality] = useState('');\n  const [activeTab, setActiveTab] = useState('All W.O');\n  const [postponeDialogOpen, setPostponeDialogOpen] = useState(false);\n  const [workOrderFormOpen, setWorkOrderFormOpen] = useState(false);\n  const [unplannedWorkOrderFormOpen, setUnplannedWorkOrderFormOpen] =\n    useState(false);\n  const [selectedWorkOrder, setSelectedWorkOrder] = useState<WorkOrder | null>(\n    null\n  );\n  const [gridApi, setGridApi] = useState<GridApi | null>(null);\n\n  // Database integration\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const vesselId = 'V001'; // Default vessel\n\n  // Fetch work orders from database\n  const { data: workOrdersFromDB = [], isLoading } = useQuery({\n    queryKey: ['/api/work-orders', vesselId],\n    queryFn: () =>\n      fetch(`/api/work-orders/${vesselId}`).then(res => res.json()),\n  });\n\n  // Create work order mutation\n  const createWorkOrderMutation = useMutation({\n    mutationFn: (workOrderData: Omit<WorkOrder, 'createdAt' | 'updatedAt'>) =>\n      apiRequest('POST', `/api/work-orders/${vesselId}`, workOrderData),\n    onSuccess: () => {\n      queryClient.invalidateQueries({\n        queryKey: ['/api/work-orders', vesselId],\n      });\n      toast({\n        title: 'Success',\n        description: 'Work order created successfully',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to create work order',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Update work order mutation\n  const updateWorkOrderMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<WorkOrder> }) =>\n      apiRequest('PUT', `/api/work-orders/${vesselId}/${id}`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({\n        queryKey: ['/api/work-orders', vesselId],\n      });\n      toast({\n        title: 'Success',\n        description: 'Work order updated successfully',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to update work order',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Delete work order mutation\n  const deleteWorkOrderMutation = useMutation({\n    mutationFn: (id: string) =>\n      apiRequest('DELETE', `/api/work-orders/${vesselId}/${id}`),\n    onSuccess: () => {\n      queryClient.invalidateQueries({\n        queryKey: ['/api/work-orders', vesselId],\n      });\n      toast({\n        title: 'Success',\n        description: 'Work order deleted successfully',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Error',\n        description: 'Failed to delete work order',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  // Modify mode integration\n  const { isModifyMode, targetId, fieldChanges } = useModifyMode();\n  const [location] = useLocation();\n\n  // Use database data if available, otherwise fallback to sample data for demo\n  const workOrdersToUse =\n    workOrdersFromDB.length > 0 ? workOrdersFromDB : sampleWorkOrders;\n\n  // Backfill templateCode for existing work orders if missing\n  const backfilledWorkOrders = workOrdersToUse.map(wo => {\n    if (!wo.templateCode && wo.componentCode && wo.taskType) {\n      const templateCode = generateTemplateCode(\n        wo.componentCode,\n        wo.taskType,\n        wo.maintenanceBasis || 'Calendar',\n        wo.frequencyValue || '',\n        wo.frequencyUnit\n      );\n      return { ...wo, templateCode };\n    }\n    return wo;\n  });\n\n  const workOrdersList = backfilledWorkOrders;\n\n  // Handle preview mode from \"View Changes\" button\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const previewChanges = urlParams.get('previewChanges');\n    const changeRequestId = urlParams.get('changeRequestId');\n    const targetType = urlParams.get('targetType');\n    const previewTargetId = urlParams.get('targetId');\n\n    // Auto-open work order form if navigating from \"View Changes\"\n    if (\n      previewChanges === '1' &&\n      targetType === 'workOrder' &&\n      previewTargetId\n    ) {\n      const targetWorkOrder = workOrdersList.find(\n        wo => wo.id === previewTargetId\n      );\n      if (targetWorkOrder) {\n        setSelectedWorkOrder(targetWorkOrder);\n        setWorkOrderFormOpen(true);\n      }\n    }\n  }, [location, workOrdersList]);\n\n  const handleWorkOrderSubmit = (workOrderId: string, formData?: any) => {\n    console.log('ðŸ”„ handleWorkOrderSubmit called:', {\n      workOrderId,\n      type: formData?.type,\n      data: formData?.data,\n    });\n    console.log('ðŸ” Full formData object:', JSON.stringify(formData, null, 2));\n\n    if (formData?.type === 'template_draft') {\n      // Save template as draft (Part A)\n      console.log('ðŸ’¾ Saving template draft...');\n      const workOrder = workOrdersList.find(wo => wo.id === workOrderId);\n      if (workOrder) {\n        console.log('ðŸ” About to update existing work order:', workOrderId);\n        updateWorkOrderMutation.mutate(\n          {\n            id: workOrderId,\n            data: {\n              ...formData.data,\n              status: 'Draft',\n              templateCode:\n                formData.data.templateCode ||\n                formData.data.woTemplateCode ||\n                workOrder.templateCode,\n              formData: formData.data, // Save the complete form data to the formData column\n            },\n          },\n          {\n            onSuccess: data => {\n              console.log('âœ… Update successful:', data);\n            },\n            onError: error => {\n              console.error('âŒ Update failed:', error);\n            },\n          }\n        );\n      } else {\n        // Create new draft work order\n        const newWorkOrder: WorkOrder = {\n          id: workOrderId.startsWith('new-') ? `wo-${Date.now()}` : workOrderId,\n          component: formData.data.component || '',\n          componentCode: formData.data.componentCode || '',\n          workOrderNo: formData.data.woTemplateCode || `WO-${Date.now()}`,\n          templateCode:\n            formData.data.templateCode || formData.data.woTemplateCode,\n          jobTitle: formData.data.woTitle || formData.data.jobTitle,\n          assignedTo: formData.data.assignedTo,\n          dueDate: formData.data.nextDueDate || '',\n          status: 'Draft',\n          formData: formData.data,\n          isExecution: false,\n        };\n        console.log('ðŸ” About to create new work order:', newWorkOrder);\n        createWorkOrderMutation.mutate(newWorkOrder, {\n          onSuccess: data => {\n            console.log('âœ… Create successful:', data);\n          },\n          onError: error => {\n            console.error('âŒ Create failed:', error);\n          },\n        });\n      }\n    } else if (formData?.type === 'execution_draft') {\n      // Save execution as draft (Part B in progress)\n      console.log('ðŸ’¾ Saving execution draft...');\n      const workOrder = workOrdersList.find(wo => wo.id === workOrderId);\n      if (workOrder) {\n        updateWorkOrderMutation.mutate({\n          id: workOrderId,\n          data: {\n            ...formData.data,\n            status: 'In Progress',\n            templateCode: formData.data.templateCode || workOrder.templateCode,\n            formData: formData.data, // Save the complete form data to the formData column\n          },\n        });\n      }\n    } else if (formData?.type === 'execution') {\n      // Generate execution ID\n      const year = new Date().getFullYear();\n      const templateCode =\n        formData.data.templateCode || formData.data.woTemplateCode;\n\n      // Find existing executions for this template to get the next sequence number\n      const existingExecutions = workOrdersList.filter(\n        wo =>\n          wo.isExecution &&\n          wo.templateId === workOrderId &&\n          wo.executionId?.startsWith(`${year}-${templateCode}`)\n      );\n      const sequence = String(existingExecutions.length + 1).padStart(2, '0');\n      const executionId = `${year}-${templateCode}-${sequence}`;\n\n      // Create new execution record\n      const executionRecord: WorkOrder = {\n        id: `exec-${Date.now()}`,\n        component: formData.data.component,\n        componentCode: formData.data.componentCode,\n        workOrderNo: executionId,\n        templateCode,\n        executionId,\n        jobTitle: formData.data.jobTitle,\n        assignedTo: formData.data.assignedTo,\n        dueDate: formData.data.dueDate || '',\n        status: 'Pending Approval',\n        submittedDate: new Date().toISOString().split('T')[0],\n        formData: formData.data,\n        isExecution: true,\n        templateId: workOrderId,\n      };\n\n      createWorkOrderMutation.mutate(executionRecord);\n      setActiveTab('Pending Approval');\n    } else if (formData?.type === 'template') {\n      // Update template\n      const workOrder = workOrdersList.find(wo => wo.id === workOrderId);\n      if (workOrder) {\n        updateWorkOrderMutation.mutate({\n          id: workOrderId,\n          data: {\n            ...formData.data,\n            templateCode:\n              formData.data.woTemplateCode ||\n              formData.data.templateCode ||\n              workOrder.templateCode,\n          },\n        });\n      }\n    }\n  };\n\n  const tabs = [\n    {\n      id: 'All W.O',\n      label: 'All W.O',\n      count: workOrdersList.filter(wo => !wo.isExecution).length,\n    },\n    {\n      id: 'Draft',\n      label: 'Draft',\n      count: workOrdersList.filter(wo => wo.status === 'Draft').length,\n    },\n    {\n      id: 'Due',\n      label: 'Due',\n      count: workOrdersList.filter(\n        wo =>\n          !wo.isExecution &&\n          (wo.status === 'Due' || wo.status.includes('Grace'))\n      ).length,\n    },\n    {\n      id: 'Pending Approval',\n      label: 'Pending Approval',\n      count: workOrdersList.filter(\n        wo => wo.isExecution && wo.status === 'Pending Approval'\n      ).length,\n    },\n    {\n      id: 'Overdue',\n      label: 'Overdue',\n      count: workOrdersList.filter(\n        wo => !wo.isExecution && wo.status === 'Overdue'\n      ).length,\n    },\n    {\n      id: 'Completed',\n      label: 'Completed',\n      count: workOrdersList.filter(\n        wo =>\n          (!wo.isExecution && wo.status === 'Completed') ||\n          (wo.isExecution && wo.status === 'Approved')\n      ).length,\n    },\n  ];\n\n  const getStatusBadgeColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'completed':\n        return 'bg-green-100 text-green-800';\n      case 'approved':\n        return 'bg-green-100 text-green-800';\n      case 'due':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'due (grace p)':\n        return 'bg-orange-100 text-orange-800';\n      case 'overdue':\n        return 'bg-red-100 text-red-800';\n      case 'postponed':\n        return 'bg-blue-100 text-blue-800';\n      case 'pending approval':\n        return 'bg-purple-100 text-purple-800';\n      case 'draft':\n        return 'bg-gray-100 text-gray-800';\n      case 'rejected':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const filteredWorkOrders = workOrdersList.filter(wo => {\n    if (activeTab === 'All W.O') {\n      // Show templates and rejected executions\n      if (wo.isExecution && wo.status !== 'Rejected') return false;\n    } else if (activeTab === 'Draft') {\n      // Show only draft work orders\n      if (wo.status !== 'Draft') return false;\n    } else if (activeTab === 'Due') {\n      if (wo.isExecution) return false;\n      if (wo.status !== 'Due' && !wo.status.includes('Grace')) return false;\n    } else if (activeTab === 'Overdue') {\n      if (wo.isExecution) return false;\n      if (wo.status !== 'Overdue') return false;\n    } else if (activeTab === 'Completed') {\n      // Show both completed templates and approved executions\n      if (!wo.isExecution && wo.status !== 'Completed') return false;\n      if (wo.isExecution && wo.status !== 'Approved') return false;\n    } else if (activeTab === 'Pending Approval') {\n      // Show only execution records with Pending Approval status\n      if (!wo.isExecution || wo.status !== 'Pending Approval') return false;\n    }\n\n    if (\n      searchTerm &&\n      !wo.jobTitle.toLowerCase().includes(searchTerm.toLowerCase()) &&\n      !wo.workOrderNo.toLowerCase().includes(searchTerm.toLowerCase()) &&\n      !(\n        wo.templateCode &&\n        wo.templateCode.toLowerCase().includes(searchTerm.toLowerCase())\n      ) &&\n      !(\n        wo.executionId &&\n        wo.executionId.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    ) {\n      return false;\n    }\n\n    return true;\n  });\n\n  const handlePostponeClick = (workOrder: WorkOrder) => {\n    setSelectedWorkOrder(workOrder);\n    setPostponeDialogOpen(true);\n  };\n\n  const handleWorkOrderClick = (workOrder: WorkOrder) => {\n    setSelectedWorkOrder(workOrder);\n\n    // If in modify mode, activate modify mode for this specific work order\n    if (isModifyMode) {\n      // The modify mode is already active via URL params\n      // Just open the form and it will detect modify mode automatically\n      setWorkOrderFormOpen(true);\n    } else {\n      setWorkOrderFormOpen(true);\n    }\n  };\n\n  const handlePencilClick = (workOrder: WorkOrder) => {\n    setSelectedWorkOrder(workOrder);\n    setWorkOrderFormOpen(true);\n  };\n\n  const handleTimerClick = (workOrder: WorkOrder) => {\n    setSelectedWorkOrder(workOrder);\n    setPostponeDialogOpen(true);\n  };\n\n  // AG Grid column definitions\n  const columnDefs = useMemo((): ColDef[] => {\n    const baseColumns: ColDef[] = [\n      {\n        headerName: 'Component',\n        field: 'component',\n        width: 200,\n        cellRenderer: params => {\n          return (\n            <span\n              className='text-blue-600 hover:text-blue-800 cursor-pointer'\n              onClick={() => handleWorkOrderClick(params.data)}\n            >\n              {params.value}\n            </span>\n          );\n        },\n      },\n      {\n        headerName:\n          activeTab === 'Pending Approval'\n            ? 'WO Execution ID'\n            : 'Work Order No',\n        field: activeTab === 'Pending Approval' ? 'executionId' : 'workOrderNo',\n        width: 180,\n        valueGetter: params => {\n          if (activeTab === 'Pending Approval' && params.data.executionId) {\n            return params.data.executionId;\n          }\n          return params.data.templateCode || params.data.workOrderNo;\n        },\n      },\n    ];\n\n    // Add template code column for pending approval\n    if (activeTab === 'Pending Approval') {\n      baseColumns.push({\n        headerName: 'WO Template Code',\n        field: 'templateCode',\n        width: 180,\n      });\n    }\n\n    // Add remaining columns\n    baseColumns.push(\n      {\n        headerName: 'Job Title',\n        field: 'jobTitle',\n        width: 250,\n      },\n      {\n        headerName: 'Assigned to',\n        field: 'assignedTo',\n        width: 150,\n      },\n      {\n        headerName:\n          activeTab === 'Pending Approval' ? 'Submitted Date' : 'Due Date',\n        field: activeTab === 'Pending Approval' ? 'submittedDate' : 'dueDate',\n        width: 150,\n        cellRenderer: DateCellRenderer,\n      },\n      {\n        headerName: 'Status',\n        field: 'status',\n        width: 150,\n        cellRenderer: StatusCellRenderer,\n      }\n    );\n\n    // Add date completed column for non-pending approval tabs\n    if (activeTab !== 'Pending Approval') {\n      baseColumns.push({\n        headerName: 'Date Completed',\n        field: 'dateCompleted',\n        width: 150,\n        cellRenderer: DateCellRenderer,\n      });\n    }\n\n    // Add actions column\n    baseColumns.push({\n      headerName: 'Actions',\n      field: 'actions',\n      width: 150,\n      cellRenderer: WorkOrderActionsCellRenderer,\n      sortable: false,\n      filter: false,\n      pinned: 'right',\n    });\n\n    return baseColumns;\n  }, [activeTab]);\n\n  // AG Grid context for action handlers\n  const gridContext = useMemo(\n    () => ({\n      onEdit: handlePencilClick,\n      onPostpone: handleTimerClick,\n      onApprove: (workOrder: WorkOrder) => {\n        handleApprove(workOrder);\n      },\n      onReject: (workOrder: WorkOrder) => {\n        handleReject(workOrder, 'Rejected from grid');\n      },\n    }),\n    []\n  );\n\n  const onGridReady = (params: GridReadyEvent) => {\n    setGridApi(params.api);\n  };\n\n  const handleApprove = (\n    workOrderOrId: WorkOrder | string,\n    approverRemarks?: string\n  ) => {\n    console.log('ðŸŽ¯ handleApprove called with:', {\n      workOrderOrId,\n      approverRemarks,\n    });\n\n    // Handle both cases: work order object from AG Grid context or string ID\n    let workOrder: WorkOrder | undefined;\n    if (typeof workOrderOrId === 'string') {\n      workOrder = workOrdersList.find(\n        wo => wo.executionId === workOrderOrId || wo.id === workOrderOrId\n      );\n    } else {\n      workOrder = workOrderOrId; // It's already the work order object\n    }\n\n    console.log('ðŸ” Found workOrder:', workOrder);\n    if (workOrder) {\n      const updatedData: Partial<WorkOrder> = {\n        status: 'Approved',\n        dateCompleted: new Date().toISOString().split('T')[0],\n        approver: 'Current User',\n        approverRemarks,\n        approvalDate: new Date().toISOString(),\n      };\n\n      // Reset maintenance cycle on the template\n      if (workOrder.maintenanceBasis === 'Calendar') {\n        const completionDate = new Date();\n        const freq = parseInt(workOrder.frequencyValue || '0');\n        if (workOrder.frequencyUnit === 'Days') {\n          completionDate.setDate(completionDate.getDate() + freq);\n        } else if (workOrder.frequencyUnit === 'Weeks') {\n          completionDate.setDate(completionDate.getDate() + freq * 7);\n        } else if (workOrder.frequencyUnit === 'Months') {\n          completionDate.setMonth(completionDate.getMonth() + freq);\n        } else if (workOrder.frequencyUnit === 'Years') {\n          completionDate.setFullYear(completionDate.getFullYear() + freq);\n        }\n        updatedData.nextDueDate = completionDate.toISOString().split('T')[0];\n      } else if (\n        workOrder.maintenanceBasis === 'Running Hours' &&\n        workOrder.currentReading\n      ) {\n        updatedData.nextDueReading = (\n          parseInt(workOrder.currentReading) +\n          parseInt(workOrder.frequencyValue || '0')\n        ).toString();\n      }\n\n      updateWorkOrderMutation.mutate({\n        id: workOrder.id,\n        data: updatedData,\n      });\n    }\n  };\n\n  const handleReject = (\n    workOrderOrId: WorkOrder | string,\n    rejectionComments: string\n  ) => {\n    console.log('ðŸŽ¯ handleReject called with:', {\n      workOrderOrId,\n      rejectionComments,\n    });\n\n    // Handle both cases: work order object from AG Grid context or string ID\n    let workOrder: WorkOrder | undefined;\n    if (typeof workOrderOrId === 'string') {\n      workOrder = workOrdersList.find(\n        wo => wo.executionId === workOrderOrId || wo.id === workOrderOrId\n      );\n    } else {\n      workOrder = workOrderOrId; // It's already the work order object\n    }\n\n    console.log('ðŸ” Found workOrder:', workOrder);\n    if (workOrder) {\n      updateWorkOrderMutation.mutate({\n        id: workOrder.id,\n        data: {\n          status: 'Rejected',\n          approver: 'Current User',\n          approverRemarks: rejectionComments,\n          rejectionDate: new Date().toISOString(),\n        },\n      });\n    }\n  };\n\n  const handlePostponeConfirm = (workOrderId: string, postponeData: any) => {\n    const workOrder = workOrdersList.find(wo => wo.id === workOrderId);\n    if (workOrder) {\n      updateWorkOrderMutation.mutate({\n        id: workOrderId,\n        data: {\n          status: 'Postponed',\n          dueDate: postponeData.nextDueDate || workOrder.dueDate,\n        },\n      });\n    }\n  };\n\n  const handleAddWorkOrderClick = () => {\n    const newWorkOrder: WorkOrder = {\n      id: `new-${Date.now()}`,\n      component: '',\n      componentCode: '',\n      workOrderNo: '',\n      templateCode: '',\n      jobTitle: '',\n      assignedTo: '',\n      dueDate: '',\n      status: 'Draft',\n    };\n    setSelectedWorkOrder(newWorkOrder);\n    setWorkOrderFormOpen(true);\n  };\n\n  // Show loading state\n  if (isLoading) {\n    return (\n      <div className='flex flex-col h-full items-center justify-center'>\n        <div className='text-center'>\n          <div className='animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4'></div>\n          <p className='text-gray-600'>Loading work orders from database...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className='flex flex-col h-full'>\n      {/* Header with Status Tabs */}\n      <div className='bg-white border-b border-gray-200'>\n        <div className='flex items-center justify-between p-4'>\n          <h1 className='text-xl font-semibold text-gray-900'>\n            Work Orders (W.O)\n          </h1>\n          <div className='flex gap-2'>\n            <Button\n              size='sm'\n              className='bg-[#52baf3] hover:bg-[#4aa3d9] text-white'\n              onClick={handleAddWorkOrderClick}\n            >\n              <Plus className='h-4 w-4 mr-1' />\n              Add W.O\n            </Button>\n            <Button\n              size='sm'\n              className='bg-green-600 hover:bg-green-700 text-white'\n              onClick={() => setUnplannedWorkOrderFormOpen(true)}\n            >\n              <Plus className='h-4 w-4 mr-1' />\n              Unplanned W.O\n            </Button>\n          </div>\n        </div>\n\n        {/* Status Tabs */}\n        <div className='flex items-center gap-1 px-4 pb-2'>\n          {tabs.map(tab => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`px-3 py-1.5 rounded text-sm font-medium transition-colors ${\n                activeTab === tab.id\n                  ? 'bg-[#52baf3] text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-50 border border-gray-300'\n              }`}\n            >\n              {tab.label}\n              {tab.count > 0 && (\n                <span className='ml-2 px-1.5 py-0.5 bg-red-500 text-white rounded-full text-xs'>\n                  {tab.count}\n                </span>\n              )}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className='flex items-center gap-3 p-4 bg-gray-50 border-b border-gray-200'>\n        <Select value={selectedVessel} onValueChange={setSelectedVessel}>\n          <SelectTrigger className='w-32'>\n            <SelectValue placeholder='Vessel' />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='vessel1'>Vessel 1</SelectItem>\n            <SelectItem value='vessel2'>Vessel 2</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <div className='relative flex-1 max-w-sm'>\n          <Search className='absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400' />\n          <Input\n            placeholder='Search Work Orders...'\n            value={searchTerm}\n            onChange={e => setSearchTerm(e.target.value)}\n            className='pl-10'\n          />\n        </div>\n\n        <Select value={selectedPeriod} onValueChange={setSelectedPeriod}>\n          <SelectTrigger className='w-24'>\n            <SelectValue placeholder='Period' />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='weekly'>Weekly</SelectItem>\n            <SelectItem value='monthly'>Monthly</SelectItem>\n            <SelectItem value='annual'>Annual</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <Select value={selectedRank} onValueChange={setSelectedRank}>\n          <SelectTrigger className='w-32'>\n            <SelectValue placeholder='All Ranks' />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='chief'>Chief Engineer</SelectItem>\n            <SelectItem value='2nd'>2nd Engineer</SelectItem>\n            <SelectItem value='3rd'>3rd Engineer</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <Select value={selectedComponent} onValueChange={setSelectedComponent}>\n          <SelectTrigger className='w-32'>\n            <SelectValue placeholder='Component' />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='engine'>Main Engine</SelectItem>\n            <SelectItem value='generator'>Diesel Generator</SelectItem>\n            <SelectItem value='pump'>Pumps</SelectItem>\n          </SelectContent>\n        </Select>\n\n        <Select\n          value={selectedCriticality}\n          onValueChange={setSelectedCriticality}\n        >\n          <SelectTrigger className='w-32'>\n            <SelectValue placeholder='Criticality' />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value='critical'>Critical</SelectItem>\n            <SelectItem value='non-critical'>Non-Critical</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Work Orders Table */}\n      <div className='flex-1 bg-white'>\n        <AgGridTable\n          rowData={filteredWorkOrders}\n          columnDefs={columnDefs}\n          onGridReady={onGridReady}\n          context={gridContext}\n          height='calc(100vh - 320px)'\n          enableExport={true}\n          enableSideBar={true}\n          enableStatusBar={true}\n          pagination={true}\n          paginationPageSize={50}\n          animateRows={true}\n          suppressRowClickSelection={true}\n          className='rounded-lg shadow-sm'\n        />\n      </div>\n\n      {/* Footer */}\n      <div className='p-4 bg-gray-50 border-t border-gray-200 text-sm text-gray-600'>\n        Page 0 of 0\n      </div>\n\n      {/* Postpone Work Order Dialog */}\n      <PostponeWorkOrderDialog\n        isOpen={postponeDialogOpen}\n        onClose={() => setPostponeDialogOpen(false)}\n        workOrder={selectedWorkOrder}\n        onConfirm={handlePostponeConfirm}\n      />\n\n      {/* Work Order Form */}\n      <WorkOrderForm\n        isOpen={workOrderFormOpen}\n        onClose={() => setWorkOrderFormOpen(false)}\n        onSubmit={handleWorkOrderSubmit}\n        onApprove={handleApprove}\n        onReject={handleReject}\n        workOrder={selectedWorkOrder}\n        isApprovalMode={\n          activeTab === 'Pending Approval' &&\n          selectedWorkOrder?.status === 'Pending Approval'\n        }\n      />\n\n      {/* Unplanned Work Order Form */}\n      <UnplannedWorkOrderForm\n        isOpen={unplannedWorkOrderFormOpen}\n        onClose={() => setUnplannedWorkOrderFormOpen(false)}\n      />\n\n      {/* Modify Mode Sticky Footer */}\n      {isModifyMode && (\n        <ModifyStickyFooter\n          isVisible={true}\n          hasChanges={Object.keys(fieldChanges).length > 0}\n          changedFieldsCount={Object.keys(fieldChanges).length}\n          onCancel={() => {\n            window.location.href = '/pms/modify';\n          }}\n          onSubmitChangeRequest={() => {\n            // Submit change request logic will be implemented\n            console.log('Submitting changes:', fieldChanges);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default WorkOrders;\n"]}