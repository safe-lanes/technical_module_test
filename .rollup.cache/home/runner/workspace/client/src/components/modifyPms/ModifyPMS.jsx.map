{"version":3,"file":"ModifyPMS.jsx","sourceRoot":"","sources":["ModifyPMS.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Wrench, Package, FileText, Archive, ArrowLeft, Eye, Check, X, Search, Plus } from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useMutation } from '@tanstack/react-query';\nimport { queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { Label } from '@/components/ui/label';\nimport { ChangeRequestModal } from '@/components/modify/ChangeRequestModal';\n\ninterface ModifyOption {\n  id: string;\n  title: string;\n  description: string;\n  icon: React.ReactNode;\n  route: string;\n}\n\nconst modifyOptions: ModifyOption[] = [\n  {\n    id: 'components',\n    title: 'Components',\n    description: 'Modify component hierarchy and details',\n    icon: <Wrench className=\"h-6 w-6\" />,\n    route: '/pms/components?modify=1'\n  },\n  {\n    id: 'work-orders',\n    title: 'Work Orders Planned',\n    description: 'Edit planned maintenance schedules',\n    icon: <FileText className=\"h-6 w-6\" />,\n    route: '/pms/work-orders?modify=1'\n  },\n  {\n    id: 'spares',\n    title: 'Spares',\n    description: 'Update spare parts inventory',\n    icon: <Package className=\"h-6 w-6\" />,\n    route: '/pms/spares?modify=1'\n  },\n  {\n    id: 'stores',\n    title: 'Stores',\n    description: 'Manage store inventory items',\n    icon: <Archive className=\"h-6 w-6\" />,\n    route: '/pms/stores?modify=1'\n  }\n];\n\ntype ViewMode = 'dashboard' | 'pending' | 'history';\n\ninterface ChangeRequest {\n  id: number;\n  vesselId: string;\n  category: string;\n  title: string;\n  reason: string;\n  status: 'draft' | 'submitted' | 'returned' | 'approved' | 'rejected';\n  requestedByUserId: string;\n  submittedAt: Date | null;\n  reviewedByUserId: string | null;\n  reviewedAt: Date | null;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport function ModifyPMS() {\n  const [categoryFilter, setCategoryFilter] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isNewRequestModalOpen, setIsNewRequestModalOpen] = useState(false);\n  const [viewingRequest, setViewingRequest] = useState<ChangeRequest | null>(null);\n  const [location, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  // Fetch change requests\n  const { data: requests = [], isLoading } = useQuery({\n    queryKey: ['/api/change-requests', categoryFilter],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      params.append('vesselId', 'V001');\n      \n      if (categoryFilter !== 'all') {\n        params.append('category', categoryFilter);\n      }\n      \n      const response = await fetch(`/api/change-requests?${params}`);\n      if (!response.ok) throw new Error('Failed to fetch requests');\n      return response.json();\n    }\n  });\n\n  // Filter requests based on search query\n  const filteredRequests = requests.filter((request: ChangeRequest) =>\n    request.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    request.status.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  // Approve mutation\n  const approveMutation = useMutation({\n    mutationFn: async ({ id, comment }: { id: number; comment: string }) => {\n      const response = await fetch(`/api/change-requests/${id}/approve`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ comment, reviewerId: 'current_user' })\n      });\n      if (!response.ok) throw new Error('Failed to approve request');\n      return response.json();\n    },\n    onMutate: async ({ id }) => {\n      // Optimistically update the UI immediately\n      if (viewingRequest) {\n        setViewingRequest({ ...viewingRequest, status: 'approved' });\n      }\n    },\n    onSuccess: (updatedRequest) => {\n      // Invalidate both list queries and individual request query\n      queryClient.invalidateQueries({ queryKey: ['/api/change-requests'] });\n      if (viewingRequest) {\n        queryClient.invalidateQueries({ queryKey: [`/api/change-requests/${viewingRequest.id}`] });\n      }\n      \n      // Force refetch to ensure UI updates immediately\n      queryClient.refetchQueries({ queryKey: ['/api/change-requests', categoryFilter] });\n      \n      setViewingRequest(null);\n      toast({\n        title: \"Request approved\",\n        description: \"The change request has been approved successfully\"\n      });\n    }\n  });\n\n  // Reject mutation\n  const rejectMutation = useMutation({\n    mutationFn: async ({ id, comment }: { id: number; comment: string }) => {\n      const response = await fetch(`/api/change-requests/${id}/reject`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ comment, reviewerId: 'current_user' })\n      });\n      if (!response.ok) throw new Error('Failed to reject request');\n      return response.json();\n    },\n    onMutate: async ({ id }) => {\n      // Optimistically update the UI immediately\n      if (viewingRequest) {\n        setViewingRequest({ ...viewingRequest, status: 'rejected' });\n      }\n    },\n    onSuccess: (updatedRequest) => {\n      // Invalidate both list queries and individual request query\n      queryClient.invalidateQueries({ queryKey: ['/api/change-requests'] });\n      if (viewingRequest) {\n        queryClient.invalidateQueries({ queryKey: [`/api/change-requests/${viewingRequest.id}`] });\n      }\n      \n      // Force refetch to ensure UI updates immediately\n      queryClient.refetchQueries({ queryKey: ['/api/change-requests', categoryFilter] });\n      \n      setViewingRequest(null);\n      toast({\n        title: \"Request rejected\",\n        description: \"The change request has been rejected\"\n      });\n    }\n  });\n\n  const handleRowClick = (request: ChangeRequest) => {\n    setViewingRequest(request);\n  };\n\n  return (\n    <>\n    <div className=\"flex h-screen bg-gray-100\">\n      {/* Left Sidebar - Blue Background */}\n      <div className=\"w-64 bg-[#52BAF3] text-white\">\n        <div className=\"p-4\">\n          <div className=\"bg-[#40a8e0] px-4 py-3 rounded-t-lg\">\n            <h2 className=\"text-white font-medium\">Category</h2>\n          </div>\n          <div className=\"bg-white rounded-b-lg\">\n            <div className=\"p-4 space-y-1\">\n              <button\n                onClick={() => setCategoryFilter('components')}\n                className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                  categoryFilter === 'components'\n                    ? 'bg-[#52BAF3] text-white font-medium'\n                    : 'text-gray-700 hover:bg-gray-50'\n                }`}\n              >\n                1. Components\n              </button>\n              <button\n                onClick={() => setCategoryFilter('work_orders')}\n                className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                  categoryFilter === 'work_orders'\n                    ? 'bg-[#52BAF3] text-white font-medium'\n                    : 'text-gray-700 hover:bg-gray-50'\n                }`}\n              >\n                2. Work orders\n              </button>\n              <button\n                onClick={() => setCategoryFilter('spares')}\n                className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                  categoryFilter === 'spares'\n                    ? 'bg-[#52BAF3] text-white font-medium'\n                    : 'text-gray-700 hover:bg-gray-50'\n                }`}\n              >\n                3. Spares\n              </button>\n              <button\n                onClick={() => setCategoryFilter('stores')}\n                className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                  categoryFilter === 'stores'\n                    ? 'bg-[#52BAF3] text-white font-medium'\n                    : 'text-gray-700 hover:bg-gray-50'\n                }`}\n              >\n                4. Stores\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Header */}\n        <div className=\"bg-white p-6 border-b border-gray-200\">\n          <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">Modify PMS - Change Requests</h1>\n          \n          <div className=\"flex justify-between items-center\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search Status\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10 w-80 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              />\n            </div>\n            <Button \n              className=\"bg-[#52BAF3] hover:bg-[#40a8e0] text-white px-6\"\n              onClick={() => setIsNewRequestModalOpen(true)}\n            >\n              <Plus className=\"w-4 h-4 mr-2\" />\n              New Change Request\n            </Button>\n          </div>\n        </div>\n\n        {/* Table Content */}\n        <div className=\"flex-1 p-6\">\n          <div className=\"bg-white rounded-lg border border-gray-200 h-full\">\n            {isLoading ? (\n              <div className=\"text-center py-12 text-gray-500\">Loading...</div>\n            ) : filteredRequests.length === 0 ? (\n              <div className=\"text-center py-12 text-gray-500\">\n                No change requests found. Click \"New Change Request\" to create one.\n              </div>\n            ) : (\n              <div className=\"h-full flex flex-col\">\n                <Table>\n                  <TableHeader>\n                    <TableRow className=\"bg-[#52BAF3] hover:bg-[#52BAF3] border-b-0\">\n                      <TableHead className=\"text-white font-medium py-4 px-6\">Request Title</TableHead>\n                      <TableHead className=\"text-white font-medium py-4 px-6\">Requested By</TableHead>\n                      <TableHead className=\"text-white font-medium py-4 px-6\">Date</TableHead>\n                      <TableHead className=\"text-white font-medium py-4 px-6\">Status</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredRequests.map((request: ChangeRequest) => (\n                      <TableRow \n                        key={request.id} \n                        className=\"border-b border-gray-200 hover:bg-gray-50 cursor-pointer\"\n                        onClick={() => handleRowClick(request)}\n                      >\n                        <TableCell className=\"py-4 px-6\">\n                          <div className=\"font-medium text-gray-900\">{request.title}</div>\n                        </TableCell>\n                        <TableCell className=\"py-4 px-6 text-gray-700\">\n                          {request.requestedByUserId === 'current_user' ? 'Chief Engineer' : \n                           request.requestedByUserId === '2nd_engineer' ? '2nd Engineer' : \n                           request.requestedByUserId === '3rd_engineer' ? '3rd Engineer' : \n                           request.requestedByUserId}\n                        </TableCell>\n                        <TableCell className=\"py-4 px-6 text-gray-700\">\n                          {request.submittedAt \n                            ? new Date(request.submittedAt).toLocaleDateString('en-GB', { \n                                year: 'numeric', \n                                month: '2-digit', \n                                day: '2-digit' \n                              }).replace(/\\//g, ' ')\n                            : new Date(request.createdAt).toLocaleDateString('en-GB', { \n                                year: 'numeric', \n                                month: '2-digit', \n                                day: '2-digit' \n                              }).replace(/\\//g, ' ')}\n                        </TableCell>\n                        <TableCell className=\"py-4 px-6\">\n                          {request.status === 'submitted' && (\n                            <Badge className=\"bg-[#52BAF3] text-white px-3 py-1 text-xs rounded-full\">\n                              Pending Approval\n                            </Badge>\n                          )}\n                          {request.status === 'approved' && (\n                            <Badge className=\"bg-green-500 text-white px-3 py-1 text-xs rounded-full\">\n                              Approved\n                            </Badge>\n                          )}\n                          {request.status === 'rejected' && (\n                            <Badge className=\"bg-red-500 text-white px-3 py-1 text-xs rounded-full\">\n                              Rejected\n                            </Badge>\n                          )}\n                          {request.status === 'draft' && (\n                            <Badge className=\"bg-gray-500 text-white px-3 py-1 text-xs rounded-full\">\n                              Draft\n                            </Badge>\n                          )}\n                          {request.status === 'returned' && (\n                            <Badge className=\"bg-yellow-500 text-white px-3 py-1 text-xs rounded-full\">\n                              Returned\n                            </Badge>\n                          )}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n                \n                {/* Pagination info at bottom */}\n                <div className=\"mt-auto px-6 py-4 border-t border-gray-200 text-sm text-gray-500\">\n                  {filteredRequests.length > 0 ? `0 to ${filteredRequests.length} of ${filteredRequests.length}` : '0 to 0 of 0'}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n\n    {/* Change Request Modal */}\n    <ChangeRequestModal\n      open={isNewRequestModalOpen}\n      onClose={() => setIsNewRequestModalOpen(false)}\n    />\n\n    {/* View Request Details Dialog */}\n    <Dialog open={!!viewingRequest} onOpenChange={() => setViewingRequest(null)}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Change Request Details</DialogTitle>\n          <DialogDescription>\n            Review and manage this change request\n          </DialogDescription>\n        </DialogHeader>\n        \n        {viewingRequest && (\n          <div className=\"space-y-6\">\n            {/* Request Info */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Title</Label>\n                <p className=\"text-gray-900 font-medium\">{viewingRequest.title}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Category</Label>\n                <p className=\"text-gray-900 capitalize\">{viewingRequest.category}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Requested By</Label>\n                <p className=\"text-gray-900\">{viewingRequest.requestedByUserId === 'current_user' ? 'Chief Engineer' : viewingRequest.requestedByUserId}</p>\n              </div>\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Status</Label>\n                <div className=\"mt-1\">\n                  {viewingRequest.status === 'submitted' && (\n                    <Badge className=\"bg-[#52BAF3] text-white\">Pending Approval</Badge>\n                  )}\n                  {viewingRequest.status === 'approved' && (\n                    <Badge className=\"bg-green-500 text-white\">Approved</Badge>\n                  )}\n                  {viewingRequest.status === 'rejected' && (\n                    <Badge className=\"bg-red-500 text-white\">Rejected</Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Reason */}\n            <div>\n              <Label className=\"text-sm font-medium text-gray-500\">Reason</Label>\n              <p className=\"text-gray-900 mt-1\">{viewingRequest.reason || 'No reason provided'}</p>\n            </div>\n\n            {/* Dates */}\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Created</Label>\n                <p className=\"text-gray-900\">{new Date(viewingRequest.createdAt).toLocaleDateString()}</p>\n              </div>\n              {viewingRequest.submittedAt && (\n                <div>\n                  <Label className=\"text-sm font-medium text-gray-500\">Submitted</Label>\n                  <p className=\"text-gray-900\">{new Date(viewingRequest.submittedAt).toLocaleDateString()}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Proposed Changes */}\n            {viewingRequest.proposedChangesJson && Array.isArray(viewingRequest.proposedChangesJson) && viewingRequest.proposedChangesJson.length > 0 && (\n              <div>\n                <Label className=\"text-sm font-medium text-gray-500\">Proposed Changes</Label>\n                <div className=\"mt-2 space-y-2\">\n                  {viewingRequest.proposedChangesJson.map((change: any, index: number) => (\n                    <div key={index} className=\"bg-blue-50 p-3 rounded-lg border\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"font-medium text-gray-700\">{change.field || change.fieldName}</span>\n                        <div className=\"flex items-center space-x-2 text-sm\">\n                          <span className=\"text-gray-600\">\"{change.oldValue || change.originalValue}\"</span>\n                          <span className=\"text-gray-400\">→</span>\n                          <span className=\"text-blue-600 font-medium\">\"{change.newValue || change.currentValue}\"</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        <DialogFooter className=\"space-x-2\">\n          {/* View Changes Button - available for all requests */}\n          {viewingRequest && (\n            <Button\n              variant=\"outline\"\n              className=\"border-blue-300 text-blue-600 hover:bg-blue-50\"\n              onClick={() => {\n                if (viewingRequest) {\n                  // Navigate to the appropriate module with change preview mode\n                  const params = new URLSearchParams();\n                  params.append('previewChanges', '1');\n                  params.append('changeRequestId', viewingRequest.id.toString());\n                  \n                  if (viewingRequest.targetType && viewingRequest.targetId) {\n                    params.append('targetType', viewingRequest.targetType);\n                    params.append('targetId', viewingRequest.targetId);\n                  }\n                  \n                  // Navigate based on category\n                  let targetPath = '';\n                  switch (viewingRequest.category) {\n                    case 'components':\n                      targetPath = '/pms/components';\n                      break;\n                    case 'workOrders':\n                      targetPath = '/pms/work-orders';\n                      break;\n                    case 'spares':\n                      targetPath = '/pms/spares';\n                      break;\n                    case 'stores':\n                      targetPath = '/pms/stores';\n                      break;\n                    default:\n                      targetPath = '/pms/components';\n                  }\n                  \n                  setLocation(`${targetPath}?${params.toString()}`);\n                  setViewingRequest(null);\n                }\n              }}\n            >\n              <Eye className=\"w-4 h-4 mr-2\" />\n              View Changes\n            </Button>\n          )}\n          \n          {viewingRequest && viewingRequest.status === 'submitted' && (\n            <>\n              <Button\n                variant=\"outline\"\n                className=\"border-red-300 text-red-600 hover:bg-red-50\"\n                onClick={() => {\n                  if (viewingRequest) {\n                    rejectMutation.mutate({\n                      id: viewingRequest.id,\n                      comment: 'Request rejected'\n                    });\n                  }\n                }}\n                disabled={rejectMutation.isPending}\n              >\n                <X className=\"w-4 h-4 mr-2\" />\n                Reject\n              </Button>\n              <Button\n                className=\"bg-green-600 hover:bg-green-700 text-white\"\n                onClick={() => {\n                  if (viewingRequest) {\n                    approveMutation.mutate({\n                      id: viewingRequest.id,\n                      comment: 'Request approved'\n                    });\n                  }\n                }}\n                disabled={approveMutation.isPending}\n              >\n                <Check className=\"w-4 h-4 mr-2\" />\n                Approve\n              </Button>\n            </>\n          )}\n          <Button variant=\"outline\" onClick={() => setViewingRequest(null)}>\n            Close\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n    </>\n  );\n}"]}