{"version":3,"file":"ModifyPMS.jsx","sourceRoot":"","sources":["ModifyPMS.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Wrench,\n  Package,\n  FileText,\n  Archive,\n  ArrowLeft,\n  Eye,\n  Check,\n  X,\n  Search,\n  Plus,\n} from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useMutation } from '@tanstack/react-query';\nimport { queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { Label } from '@/components/ui/label';\nimport { ChangeRequestModal } from '@/components/modify/ChangeRequestModal';\n\ninterface ModifyOption {\n  id: string;\n  title: string;\n  description: string;\n  icon: React.ReactNode;\n  route: string;\n}\n\nconst modifyOptions: ModifyOption[] = [\n  {\n    id: 'components',\n    title: 'Components',\n    description: 'Modify component hierarchy and details',\n    icon: <Wrench className='h-6 w-6' />,\n    route: '/pms/components?modify=1',\n  },\n  {\n    id: 'work-orders',\n    title: 'Work Orders Planned',\n    description: 'Edit planned maintenance schedules',\n    icon: <FileText className='h-6 w-6' />,\n    route: '/pms/work-orders?modify=1',\n  },\n  {\n    id: 'spares',\n    title: 'Spares',\n    description: 'Update spare parts inventory',\n    icon: <Package className='h-6 w-6' />,\n    route: '/pms/spares?modify=1',\n  },\n  {\n    id: 'stores',\n    title: 'Stores',\n    description: 'Manage store inventory items',\n    icon: <Archive className='h-6 w-6' />,\n    route: '/pms/stores?modify=1',\n  },\n];\n\ntype ViewMode = 'dashboard' | 'pending' | 'history';\n\ninterface ChangeRequest {\n  id: number;\n  vesselId: string;\n  category: string;\n  title: string;\n  reason: string;\n  status: 'draft' | 'submitted' | 'returned' | 'approved' | 'rejected';\n  requestedByUserId: string;\n  submittedAt: Date | null;\n  reviewedByUserId: string | null;\n  reviewedAt: Date | null;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport function ModifyPMS() {\n  const [categoryFilter, setCategoryFilter] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isNewRequestModalOpen, setIsNewRequestModalOpen] = useState(false);\n  const [viewingRequest, setViewingRequest] = useState<ChangeRequest | null>(\n    null\n  );\n  const [location, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  // Fetch change requests\n  const { data: requests = [], isLoading } = useQuery({\n    queryKey: ['/api/change-requests', categoryFilter],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      params.append('vesselId', 'V001');\n\n      if (categoryFilter !== 'all') {\n        params.append('category', categoryFilter);\n      }\n\n      const response = await fetch(`/api/change-requests?${params}`);\n      if (!response.ok) throw new Error('Failed to fetch requests');\n      return response.json();\n    },\n  });\n\n  // Filter requests based on search query\n  const filteredRequests = requests.filter(\n    (request: ChangeRequest) =>\n      request.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      request.status.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  // Approve mutation\n  const approveMutation = useMutation({\n    mutationFn: async ({ id, comment }: { id: number; comment: string }) => {\n      const response = await fetch(`/api/change-requests/${id}/approve`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ comment, reviewerId: 'current_user' }),\n      });\n      if (!response.ok) throw new Error('Failed to approve request');\n      return response.json();\n    },\n    onMutate: async ({ id }) => {\n      // Optimistically update the UI immediately\n      if (viewingRequest) {\n        setViewingRequest({ ...viewingRequest, status: 'approved' });\n      }\n    },\n    onSuccess: updatedRequest => {\n      // Invalidate both list queries and individual request query\n      queryClient.invalidateQueries({ queryKey: ['/api/change-requests'] });\n      if (viewingRequest) {\n        queryClient.invalidateQueries({\n          queryKey: [`/api/change-requests/${viewingRequest.id}`],\n        });\n      }\n\n      // Force refetch to ensure UI updates immediately\n      queryClient.refetchQueries({\n        queryKey: ['/api/change-requests', categoryFilter],\n      });\n\n      setViewingRequest(null);\n      toast({\n        title: 'Request approved',\n        description: 'The change request has been approved successfully',\n      });\n    },\n  });\n\n  // Reject mutation\n  const rejectMutation = useMutation({\n    mutationFn: async ({ id, comment }: { id: number; comment: string }) => {\n      const response = await fetch(`/api/change-requests/${id}/reject`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ comment, reviewerId: 'current_user' }),\n      });\n      if (!response.ok) throw new Error('Failed to reject request');\n      return response.json();\n    },\n    onMutate: async ({ id }) => {\n      // Optimistically update the UI immediately\n      if (viewingRequest) {\n        setViewingRequest({ ...viewingRequest, status: 'rejected' });\n      }\n    },\n    onSuccess: updatedRequest => {\n      // Invalidate both list queries and individual request query\n      queryClient.invalidateQueries({ queryKey: ['/api/change-requests'] });\n      if (viewingRequest) {\n        queryClient.invalidateQueries({\n          queryKey: [`/api/change-requests/${viewingRequest.id}`],\n        });\n      }\n\n      // Force refetch to ensure UI updates immediately\n      queryClient.refetchQueries({\n        queryKey: ['/api/change-requests', categoryFilter],\n      });\n\n      setViewingRequest(null);\n      toast({\n        title: 'Request rejected',\n        description: 'The change request has been rejected',\n      });\n    },\n  });\n\n  const handleRowClick = (request: ChangeRequest) => {\n    setViewingRequest(request);\n  };\n\n  return (\n    <>\n      <div className='flex h-screen bg-gray-100'>\n        {/* Left Sidebar - Blue Background */}\n        <div className='w-64 bg-[#52BAF3] text-white'>\n          <div className='p-4'>\n            <div className='bg-[#40a8e0] px-4 py-3 rounded-t-lg'>\n              <h2 className='text-white font-medium'>Category</h2>\n            </div>\n            <div className='bg-white rounded-b-lg'>\n              <div className='p-4 space-y-1'>\n                <button\n                  onClick={() => setCategoryFilter('components')}\n                  className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                    categoryFilter === 'components'\n                      ? 'bg-[#52BAF3] text-white font-medium'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  1. Components\n                </button>\n                <button\n                  onClick={() => setCategoryFilter('work_orders')}\n                  className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                    categoryFilter === 'work_orders'\n                      ? 'bg-[#52BAF3] text-white font-medium'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  2. Work orders\n                </button>\n                <button\n                  onClick={() => setCategoryFilter('spares')}\n                  className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                    categoryFilter === 'spares'\n                      ? 'bg-[#52BAF3] text-white font-medium'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  3. Spares\n                </button>\n                <button\n                  onClick={() => setCategoryFilter('stores')}\n                  className={`w-full text-left px-3 py-2 text-sm rounded transition-colors ${\n                    categoryFilter === 'stores'\n                      ? 'bg-[#52BAF3] text-white font-medium'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  4. Stores\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content Area */}\n        <div className='flex-1 flex flex-col'>\n          {/* Header */}\n          <div className='bg-white p-6 border-b border-gray-200'>\n            <h1 className='text-2xl font-bold text-gray-800 mb-4'>\n              Modify PMS - Change Requests\n            </h1>\n\n            <div className='flex justify-between items-center'>\n              <div className='relative'>\n                <Search className='absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400' />\n                <input\n                  type='text'\n                  placeholder='Search Status'\n                  value={searchQuery}\n                  onChange={e => setSearchQuery(e.target.value)}\n                  className='pl-10 w-80 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500'\n                />\n              </div>\n              <Button\n                className='bg-[#52BAF3] hover:bg-[#40a8e0] text-white px-6'\n                onClick={() => setIsNewRequestModalOpen(true)}\n              >\n                <Plus className='w-4 h-4 mr-2' />\n                New Change Request\n              </Button>\n            </div>\n          </div>\n\n          {/* Table Content */}\n          <div className='flex-1 p-6'>\n            <div className='bg-white rounded-lg border border-gray-200 h-full'>\n              {isLoading ? (\n                <div className='text-center py-12 text-gray-500'>\n                  Loading...\n                </div>\n              ) : filteredRequests.length === 0 ? (\n                <div className='text-center py-12 text-gray-500'>\n                  No change requests found. Click \"New Change Request\" to create\n                  one.\n                </div>\n              ) : (\n                <div className='h-full flex flex-col'>\n                  <Table>\n                    <TableHeader>\n                      <TableRow className='bg-[#52BAF3] hover:bg-[#52BAF3] border-b-0'>\n                        <TableHead className='text-white font-medium py-4 px-6'>\n                          Request Title\n                        </TableHead>\n                        <TableHead className='text-white font-medium py-4 px-6'>\n                          Requested By\n                        </TableHead>\n                        <TableHead className='text-white font-medium py-4 px-6'>\n                          Date\n                        </TableHead>\n                        <TableHead className='text-white font-medium py-4 px-6'>\n                          Status\n                        </TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {filteredRequests.map((request: ChangeRequest) => (\n                        <TableRow\n                          key={request.id}\n                          className='border-b border-gray-200 hover:bg-gray-50 cursor-pointer'\n                          onClick={() => handleRowClick(request)}\n                        >\n                          <TableCell className='py-4 px-6'>\n                            <div className='font-medium text-gray-900'>\n                              {request.title}\n                            </div>\n                          </TableCell>\n                          <TableCell className='py-4 px-6 text-gray-700'>\n                            {request.requestedByUserId === 'current_user'\n                              ? 'Chief Engineer'\n                              : request.requestedByUserId === '2nd_engineer'\n                                ? '2nd Engineer'\n                                : request.requestedByUserId === '3rd_engineer'\n                                  ? '3rd Engineer'\n                                  : request.requestedByUserId}\n                          </TableCell>\n                          <TableCell className='py-4 px-6 text-gray-700'>\n                            {request.submittedAt\n                              ? new Date(request.submittedAt)\n                                  .toLocaleDateString('en-GB', {\n                                    year: 'numeric',\n                                    month: '2-digit',\n                                    day: '2-digit',\n                                  })\n                                  .replace(/\\//g, ' ')\n                              : new Date(request.createdAt)\n                                  .toLocaleDateString('en-GB', {\n                                    year: 'numeric',\n                                    month: '2-digit',\n                                    day: '2-digit',\n                                  })\n                                  .replace(/\\//g, ' ')}\n                          </TableCell>\n                          <TableCell className='py-4 px-6'>\n                            {request.status === 'submitted' && (\n                              <Badge className='bg-[#52BAF3] text-white px-3 py-1 text-xs rounded-full'>\n                                Pending Approval\n                              </Badge>\n                            )}\n                            {request.status === 'approved' && (\n                              <Badge className='bg-green-500 text-white px-3 py-1 text-xs rounded-full'>\n                                Approved\n                              </Badge>\n                            )}\n                            {request.status === 'rejected' && (\n                              <Badge className='bg-red-500 text-white px-3 py-1 text-xs rounded-full'>\n                                Rejected\n                              </Badge>\n                            )}\n                            {request.status === 'draft' && (\n                              <Badge className='bg-gray-500 text-white px-3 py-1 text-xs rounded-full'>\n                                Draft\n                              </Badge>\n                            )}\n                            {request.status === 'returned' && (\n                              <Badge className='bg-yellow-500 text-white px-3 py-1 text-xs rounded-full'>\n                                Returned\n                              </Badge>\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n\n                  {/* Pagination info at bottom */}\n                  <div className='mt-auto px-6 py-4 border-t border-gray-200 text-sm text-gray-500'>\n                    {filteredRequests.length > 0\n                      ? `0 to ${filteredRequests.length} of ${filteredRequests.length}`\n                      : '0 to 0 of 0'}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Change Request Modal */}\n      <ChangeRequestModal\n        open={isNewRequestModalOpen}\n        onClose={() => setIsNewRequestModalOpen(false)}\n      />\n\n      {/* View Request Details Dialog */}\n      <Dialog\n        open={!!viewingRequest}\n        onOpenChange={() => setViewingRequest(null)}\n      >\n        <DialogContent className='max-w-4xl max-h-[90vh] overflow-y-auto'>\n          <DialogHeader>\n            <DialogTitle>Change Request Details</DialogTitle>\n            <DialogDescription>\n              Review and manage this change request\n            </DialogDescription>\n          </DialogHeader>\n\n          {viewingRequest && (\n            <div className='space-y-6'>\n              {/* Request Info */}\n              <div className='grid grid-cols-2 gap-4'>\n                <div>\n                  <Label className='text-sm font-medium text-gray-500'>\n                    Title\n                  </Label>\n                  <p className='text-gray-900 font-medium'>\n                    {viewingRequest.title}\n                  </p>\n                </div>\n                <div>\n                  <Label className='text-sm font-medium text-gray-500'>\n                    Category\n                  </Label>\n                  <p className='text-gray-900 capitalize'>\n                    {viewingRequest.category}\n                  </p>\n                </div>\n                <div>\n                  <Label className='text-sm font-medium text-gray-500'>\n                    Requested By\n                  </Label>\n                  <p className='text-gray-900'>\n                    {viewingRequest.requestedByUserId === 'current_user'\n                      ? 'Chief Engineer'\n                      : viewingRequest.requestedByUserId}\n                  </p>\n                </div>\n                <div>\n                  <Label className='text-sm font-medium text-gray-500'>\n                    Status\n                  </Label>\n                  <div className='mt-1'>\n                    {viewingRequest.status === 'submitted' && (\n                      <Badge className='bg-[#52BAF3] text-white'>\n                        Pending Approval\n                      </Badge>\n                    )}\n                    {viewingRequest.status === 'approved' && (\n                      <Badge className='bg-green-500 text-white'>\n                        Approved\n                      </Badge>\n                    )}\n                    {viewingRequest.status === 'rejected' && (\n                      <Badge className='bg-red-500 text-white'>Rejected</Badge>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* Reason */}\n              <div>\n                <Label className='text-sm font-medium text-gray-500'>\n                  Reason\n                </Label>\n                <p className='text-gray-900 mt-1'>\n                  {viewingRequest.reason || 'No reason provided'}\n                </p>\n              </div>\n\n              {/* Dates */}\n              <div className='grid grid-cols-2 gap-4'>\n                <div>\n                  <Label className='text-sm font-medium text-gray-500'>\n                    Created\n                  </Label>\n                  <p className='text-gray-900'>\n                    {new Date(viewingRequest.createdAt).toLocaleDateString()}\n                  </p>\n                </div>\n                {viewingRequest.submittedAt && (\n                  <div>\n                    <Label className='text-sm font-medium text-gray-500'>\n                      Submitted\n                    </Label>\n                    <p className='text-gray-900'>\n                      {new Date(\n                        viewingRequest.submittedAt\n                      ).toLocaleDateString()}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Proposed Changes */}\n              {viewingRequest.proposedChangesJson &&\n                Array.isArray(viewingRequest.proposedChangesJson) &&\n                viewingRequest.proposedChangesJson.length > 0 && (\n                  <div>\n                    <Label className='text-sm font-medium text-gray-500'>\n                      Proposed Changes\n                    </Label>\n                    <div className='mt-2 space-y-2'>\n                      {viewingRequest.proposedChangesJson.map(\n                        (change: any, index: number) => (\n                          <div\n                            key={index}\n                            className='bg-blue-50 p-3 rounded-lg border'\n                          >\n                            <div className='flex justify-between items-center'>\n                              <span className='font-medium text-gray-700'>\n                                {change.field || change.fieldName}\n                              </span>\n                              <div className='flex items-center space-x-2 text-sm'>\n                                <span className='text-gray-600'>\n                                  \"{change.oldValue || change.originalValue}\"\n                                </span>\n                                <span className='text-gray-400'>â†’</span>\n                                <span className='text-blue-600 font-medium'>\n                                  \"{change.newValue || change.currentValue}\"\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                        )\n                      )}\n                    </div>\n                  </div>\n                )}\n            </div>\n          )}\n\n          <DialogFooter className='space-x-2'>\n            {/* View Changes Button - available for all requests */}\n            {viewingRequest && (\n              <Button\n                variant='outline'\n                className='border-blue-300 text-blue-600 hover:bg-blue-50'\n                onClick={() => {\n                  if (viewingRequest) {\n                    // Navigate to the appropriate module with change preview mode\n                    const params = new URLSearchParams();\n                    params.append('previewChanges', '1');\n                    params.append(\n                      'changeRequestId',\n                      viewingRequest.id.toString()\n                    );\n\n                    if (viewingRequest.targetType && viewingRequest.targetId) {\n                      params.append('targetType', viewingRequest.targetType);\n                      params.append('targetId', viewingRequest.targetId);\n                    }\n\n                    // Navigate based on category\n                    let targetPath = '';\n                    switch (viewingRequest.category) {\n                      case 'components':\n                        targetPath = '/pms/components';\n                        break;\n                      case 'workOrders':\n                        targetPath = '/pms/work-orders';\n                        break;\n                      case 'spares':\n                        targetPath = '/pms/spares';\n                        break;\n                      case 'stores':\n                        targetPath = '/pms/stores';\n                        break;\n                      default:\n                        targetPath = '/pms/components';\n                    }\n\n                    setLocation(`${targetPath}?${params.toString()}`);\n                    setViewingRequest(null);\n                  }\n                }}\n              >\n                <Eye className='w-4 h-4 mr-2' />\n                View Changes\n              </Button>\n            )}\n\n            {viewingRequest && viewingRequest.status === 'submitted' && (\n              <>\n                <Button\n                  variant='outline'\n                  className='border-red-300 text-red-600 hover:bg-red-50'\n                  onClick={() => {\n                    if (viewingRequest) {\n                      rejectMutation.mutate({\n                        id: viewingRequest.id,\n                        comment: 'Request rejected',\n                      });\n                    }\n                  }}\n                  disabled={rejectMutation.isPending}\n                >\n                  <X className='w-4 h-4 mr-2' />\n                  Reject\n                </Button>\n                <Button\n                  className='bg-green-600 hover:bg-green-700 text-white'\n                  onClick={() => {\n                    if (viewingRequest) {\n                      approveMutation.mutate({\n                        id: viewingRequest.id,\n                        comment: 'Request approved',\n                      });\n                    }\n                  }}\n                  disabled={approveMutation.isPending}\n                >\n                  <Check className='w-4 h-4 mr-2' />\n                  Approve\n                </Button>\n              </>\n            )}\n            <Button variant='outline' onClick={() => setViewingRequest(null)}>\n              Close\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"]}