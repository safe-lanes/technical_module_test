{"version":3,"file":"ChangeRequestContext.jsx","sourceRoot":"","sources":["ChangeRequestContext.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,EAAE,EAAE,aAAa,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AA2BnE,IAAM,oBAAoB,GAAG,aAAa,CAAuC,SAAS,CAAC,CAAC;AAE5F,sFAAsF;AACtF,IAAM,cAAc,GAAW;IAC7B,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,gBAAgB,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;IAC9E,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,EAAE,cAAc,EAAE;IAC3E,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,0BAA0B,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,0BAA0B,EAAE;CACnG,CAAC;AAEF,MAAM,CAAC,IAAM,qBAAqB,GAA4C,UAAC,EAAY;QAAV,QAAQ,cAAA;IACjF,IAAA,KAAgD,QAAQ,CAAC,KAAK,CAAC,EAA9D,mBAAmB,QAAA,EAAE,sBAAsB,QAAmB,CAAC;IAChE,IAAA,KAAkC,QAAQ,EAAmC,EAA5E,YAAY,QAAA,EAAE,eAAe,QAA+C,CAAC;IAC9E,IAAA,KAAoC,QAAQ,CAAsB,EAAE,CAAC,EAApE,aAAa,QAAA,EAAE,gBAAgB,QAAqC,CAAC;IACtE,IAAA,KAAgC,QAAQ,CAAO,cAAc,CAAC,CAAC,CAAC,CAAC,EAAhE,WAAW,QAAA,EAAE,cAAc,QAAqC,CAAC,CAAC,0BAA0B;IAEnG,IAAM,sBAAsB,GAAG,UAAC,QAAgB,EAAE,YAAiC;QACjF,sBAAsB,CAAC,IAAI,CAAC,CAAC;QAC7B,eAAe,CAAC,YAAY,CAAC,CAAC;QAC9B,gBAAgB,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC,CAAC;IAEF,IAAM,qBAAqB,GAAG;QAC5B,sBAAsB,CAAC,KAAK,CAAC,CAAC;QAC9B,eAAe,CAAC,SAAS,CAAC,CAAC;QAC3B,gBAAgB,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC,CAAC;IAEF,IAAM,kBAAkB,GAAG,UAAC,SAAiB,EAAE,KAAU;QACvD,gBAAgB,CAAC,UAAA,IAAI;;YAAI,OAAA,uBACpB,IAAI,gBACN,SAAS,IAAG,KAAK,OAClB;QAHuB,CAGvB,CAAC,CAAC;IACN,CAAC,CAAC;IAEF,IAAM,kBAAkB,GAAG;QACzB,gBAAgB,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC,CAAC;IAEF,OAAO,CACL,CAAC,oBAAoB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YACpC,mBAAmB,qBAAA;YACnB,YAAY,cAAA;YACZ,aAAa,eAAA;YACb,WAAW,aAAA;YACX,cAAc,gBAAA;YACd,sBAAsB,wBAAA;YACtB,qBAAqB,uBAAA;YACrB,kBAAkB,oBAAA;YAClB,kBAAkB,oBAAA;YAClB,aAAa,EAAE,kBAAkB;SAClC,CAAC,CACA;MAAA,CAAC,QAAQ,CACX;IAAA,EAAE,oBAAoB,CAAC,QAAQ,CAAC,CACjC,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,gBAAgB,GAAG;IAC9B,IAAM,OAAO,GAAG,UAAU,CAAC,oBAAoB,CAAC,CAAC;IACjD,IAAI,OAAO,KAAK,SAAS,EAAE,CAAC;QAC1B,MAAM,IAAI,KAAK,CAAC,8DAA8D,CAAC,CAAC;IAClF,CAAC;IACD,OAAO,OAAO,CAAC;AACjB,CAAC,CAAC","sourcesContent":["import React, { createContext, useContext, useState } from \"react\";\n// User roles and interfaces\nexport type UserRole = \"requestor\" | \"approver\";\n\nexport interface User {\n  id: string;\n  name: string;\n  role: UserRole;\n  title?: string;\n}\n\nexport interface FormModeContext {\n  isChangeRequestMode: boolean;\n  originalData?: Record<string, any>;\n  changedFields: Record<string, any>;\n  onFieldChange?: (fieldName: string, value: any) => void;\n}\n\ninterface ChangeRequestContextType extends FormModeContext {\n  currentUser: User;\n  setCurrentUser: (user: User) => void;\n  enterChangeRequestMode: (category: string, originalData: Record<string, any>) => void;\n  exitChangeRequestMode: () => void;\n  updateChangedField: (fieldName: string, value: any) => void;\n  resetChangedFields: () => void;\n}\n\nconst ChangeRequestContext = createContext<ChangeRequestContextType | undefined>(undefined);\n\n// Simulate current users for testing - in production this would come from auth system\nconst simulatedUsers: User[] = [\n  { id: \"1\", name: \"Chief Engineer\", role: \"approver\", title: \"Chief Engineer\" },\n  { id: \"2\", name: \"2nd Engineer\", role: \"requestor\", title: \"2nd Engineer\" },\n  { id: \"3\", name: \"Technical Superintendent\", role: \"approver\", title: \"Technical Superintendent\" },\n];\n\nexport const ChangeRequestProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [isChangeRequestMode, setIsChangeRequestMode] = useState(false);\n  const [originalData, setOriginalData] = useState<Record<string, any> | undefined>();\n  const [changedFields, setChangedFields] = useState<Record<string, any>>({});\n  const [currentUser, setCurrentUser] = useState<User>(simulatedUsers[1]); // Default to 2nd Engineer\n\n  const enterChangeRequestMode = (category: string, originalData: Record<string, any>) => {\n    setIsChangeRequestMode(true);\n    setOriginalData(originalData);\n    setChangedFields({});\n  };\n\n  const exitChangeRequestMode = () => {\n    setIsChangeRequestMode(false);\n    setOriginalData(undefined);\n    setChangedFields({});\n  };\n\n  const updateChangedField = (fieldName: string, value: any) => {\n    setChangedFields(prev => ({\n      ...prev,\n      [fieldName]: value\n    }));\n  };\n\n  const resetChangedFields = () => {\n    setChangedFields({});\n  };\n\n  return (\n    <ChangeRequestContext.Provider value={{\n      isChangeRequestMode,\n      originalData,\n      changedFields,\n      currentUser,\n      setCurrentUser,\n      enterChangeRequestMode,\n      exitChangeRequestMode,\n      updateChangedField,\n      resetChangedFields,\n      onFieldChange: updateChangedField\n    }}>\n      {children}\n    </ChangeRequestContext.Provider>\n  );\n};\n\nexport const useChangeRequest = () => {\n  const context = useContext(ChangeRequestContext);\n  if (context === undefined) {\n    throw new Error('useChangeRequest must be used within a ChangeRequestProvider');\n  }\n  return context;\n};"]}